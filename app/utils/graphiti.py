# -*- coding: utf-8 -*-

import logging
import os
import json
from dotenv import load_dotenv
from typing import List, Dict, Any, Optional
from pydantic import BaseModel, Field
from openai import OpenAI
from graphiti_core.nodes import EpisodeType
from datetime import datetime, timezone
import asyncio
from graphiti_core.search.search_config_recipes import COMBINED_HYBRID_SEARCH_RRF,NODE_HYBRID_SEARCH_RRF, EDGE_HYBRID_SEARCH_NODE_DISTANCE
from graphiti_core.utils.bulk_utils import RawEpisode
from graphiti_core.errors import NodeNotFoundError, EdgeNotFoundError, EntityTypeValidationError
from graphiti_core import Graphiti
from graphiti_core.llm_client.config import LLMConfig
from graphiti_core.llm_client.openai_generic_client import OpenAIGenericClient
from graphiti_core.embedder.openai import OpenAIEmbedder, OpenAIEmbedderConfig
from graphiti_core.cross_encoder.openai_reranker_client import OpenAIRerankerClient
from graphiti_core.llm_client.openai_client import OpenAIClient
from graphiti_core.prompts.models import Message
import graphiti_core
# from app.core.logger import logger
logging.basicConfig(
    level="INFO",
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s',
    datefmt='%Y-%m-%d %H:%M:%S',
)
logger = logging.getLogger(__name__)


graphiti_root = os.path.dirname(graphiti_core.__file__)
print(graphiti_root)
print(f"Graphiti 核心包路径：{graphiti_root}")


def get_extraction_prompt(text: str) -> str:
    """重写实体提取 Prompt，注入自定义规则"""
    custom_prompt = f"""
        你是一位专业知识图谱构建专家，专注于从文本中提取结构化实体和关系，任务是从客户咨询文本中提取实体和关系。

        输入文本：{text}

        提取要求：
        1. 实体抽取规则(或标准)：
           - 人物：客户姓名（Person，如：张先生）
           - 产品：具体商品名称（Product，如：iPhone 15）
           - 功能：产品特性（如：续航能力、摄影功能）
           - 日期 → "Date"
           - 数值：金额/参数（Price，如：6000元）

        2. 关系抽取规则：
           - 兴趣关联：客户对产品功能的关注（relation_type: "interested_in"）
           - 预算范围：客户预算与产品的关联（relation_type: "budget_range"）
           - 产品与功能："has_feature"

        3. 输出格式要求：
           - 仅输出 JSON 格式，不要包含任何额外说明
           - 日期统一格式为yyyy-MM-dd
           - JSON 必须包含两个字段：
             - "extracted_entities"：实体列表（每个实体含 entity_name, entity_type）
             - "extracted_relations"：关系列表（每个关系含 source, target, relation_type）
           - 不要添加未提及的实体/关系
           - 实体类型需明确分类
           - 保证数据真实性（避免 LLM 生成幻觉）
           - 关系置信度低于0.75时不输出
    """
    return custom_prompt

class CustomPromptClient(OpenAIGenericClient):

    def generate_prompt(self, text: str) -> str:
        return self._get_entity_extraction_prompt(text)

    def _get_entity_extraction_prompt(self, text: str) -> str:
        """重写实体提取 Prompt，注入自定义规则"""
        custom_prompt = f"""
            你是一位专业知识图谱构建专家，专注于从文本中提取结构化实体和关系，任务是从客户咨询文本中提取实体和关系。

            输入文本：{text}

            提取要求：
            1. 实体抽取规则(或标准)：
               - 人物：客户姓名（Person，如：张先生）
               - 产品：具体商品名称（Product，如：iPhone 15）
               - 功能：产品特性（如：续航能力、摄影功能）
               - 日期 → "Date"
               - 数值：金额/参数（Price，如：6000元）

            2. 关系抽取规则：
               - 兴趣关联：客户对产品功能的关注（relation_type: "interested_in"）
               - 预算范围：客户预算与产品的关联（relation_type: "budget_range"）
               - 产品与功能："has_feature"

            3. 输出格式要求：
               - 仅输出 JSON 格式，不要包含任何额外说明
               - 日期统一格式为yyyy-MM-dd
               - JSON 必须包含两个字段：
                 - "extracted_entities"：实体列表（每个实体含 entity_name, entity_type）
                 - "extracted_relations"：关系列表（每个关系含 source, target, relation_type）
               - 不要添加未提及的实体/关系
               - 实体类型需明确分类
               - 保证数据真实性（避免 LLM 生成幻觉）
               - 关系置信度低于0.75时不输出
        """
        print(custom_prompt)
        return custom_prompt

# 加载环境变量
load_dotenv()
# 配置参数（新增Qwen3本地部署配置）
NEO4J_URI = os.getenv("NEO4J_URI", "bolt://localhost:7687")
NEO4J_USER = os.getenv("NEO4J_USER", "neo4j")
NEO4J_PASSWORD = os.getenv("NEO4J_PASSWORD", "neo4jPass#123")
QWEN_API_BASE = os.getenv("QWEN_API_BASE", "http://localhost:11434/v1")
QWEN_API_KEY = os.getenv("QWEN_API_KEY", "EMPTY")  # 本地模型可能不需要API密钥，填任意值
LLM_MODEL = os.getenv("LLM_MODEL", "qwen3:8b")
EMBEDDING_MODEL = os.getenv("EMBEDDING_MODEL", "qwen3-embedding:0.6b")

ollama_client = OpenAI(
    api_key=QWEN_API_KEY,
    base_url=QWEN_API_BASE,
    timeout=180,
    max_retries=3
)
llm_config = LLMConfig(
    api_key=QWEN_API_KEY,
    model=LLM_MODEL,
    small_model=LLM_MODEL,
    base_url=QWEN_API_BASE,
    max_tokens=8192 * 2,
    temperature=0.75
)
# llm_client = OpenAIGenericClient(config=llm_config)
llm_client = CustomPromptClient(config=llm_config)
pmt = get_extraction_prompt("客户张先生于2024年10月26日来电，表示对iPhone 15的续航能力和摄影功能非常感兴趣，他的预算是6000元。")

embedder_config = OpenAIEmbedderConfig(api_key=QWEN_API_KEY, base_url=QWEN_API_BASE, embedding_model=EMBEDDING_MODEL, embedding_dim=1024)
embedder = OpenAIEmbedder(config=embedder_config)
cross_encoder = OpenAIRerankerClient(config=llm_config, client=llm_client)

graphiti = Graphiti(
    uri=NEO4J_URI,
    user=NEO4J_USER,
    password=NEO4J_PASSWORD,
    llm_client=llm_client,
    embedder=embedder,
    cross_encoder=cross_encoder,
)

episodes_data = [
    {
        'name': '产品咨询',
        'content': '用户询问iPhone 15的摄影功能',
        'source': EpisodeType.text,
        'description': '在线客服记录',
        'timestamp': datetime.now(timezone.utc)
    },
    {
        'name': '技术规格',
        'content': 'iPhone 15配备4800万像素主摄像头',
        'source': EpisodeType.text,
        'description': '产品规格文档',
        'timestamp': datetime(2025, 9, 1, tzinfo=timezone.utc)
    }
]

# 数据模型定义（保持不变）
class Entity(BaseModel):
    """实体模型"""
    id: str = Field(..., description="实体唯一标识")
    name: str = Field(..., description="实体名称")
    type: str = Field(..., description="实体类型，如人物、公司、产品等")
    properties: Optional[Dict[str, Any]] = Field(None, description="实体属性")

class Relation(BaseModel):
    """关系模型"""
    source_id: str = Field(..., description="源实体ID")
    target_id: str = Field(..., description="目标实体ID")
    type: str = Field(..., description="关系类型")
    properties: Optional[Dict[str, Any]] = Field(None, description="关系属性")


class TextProcessingState(BaseModel):
    """文本处理状态"""
    text: str = Field(..., description="输入文本")
    entities: List[Entity] = Field(default_factory=list, description="提取的实体列表")
    relations: List[Relation] = Field(default_factory=list, description="提取的关系列表")
    processing_status: str = Field("init", description="处理状态")
    error: Optional[str] = Field(None, description="错误信息")

async def bulk_add_episodes():
    episodes = [
        RawEpisode(
            name=f"Product {i}",
            content=json.dumps(product),
            source=EpisodeType.json,
            source_description="产品记录",
            reference_time=datetime.now(timezone.utc)
        )
        for i, product in enumerate(episodes_data)
    ]
    await graphiti.add_episode_bulk(episodes)

async def test_graphiti():
    try:
        prompt = """
                作为一个专业的高级知识图谱专家，从以下文本中提取实体和关系，返回格式必须包含 "extracted_entities" 字段（列表类型，每个元素含 "entity_name"、"entity_type"）
                和 "extracted_relations" 字段（列表类型，每个元素含 "source"、"target"、"relation_type"）：
                文本：客户张先生于2024年10月26日来电，表示对iPhone 15的续航能力和摄影功能非常感兴趣，他的预算是6000元。
                """
        # # 调用 LLM
        # response = ollama_client.chat.completions.create(
        #     model=LLM_MODEL,
        #     messages=[{"role": "user", "content": pmt}],
        #     response_format={"type": "json_object"},  # 强制 LLM 返回 JSON 格式
        #     timeout=180
        # )
        # # 解析 LLM 响应
        # llm_output = json.loads(response.choices[0].message.content)
        # print("✅ LLM 返回的实体关系数据：")
        # print(json.dumps(llm_output, ensure_ascii=False, indent=2))
        # print("✅ 是否包含 'extracted_entities' 字段：", "extracted_entities" in llm_output)
        # print("✅ 是否包含 'extracted_relations' 字段：", "extracted_relations" in llm_output)
        # resp = await llm_client.generate_response([Message(role="user", content=pmt)])
        # # {'extracted_entities': [{'entity_name': '张先生', 'entity_type': 'Person'}, {'entity_name': 'iPhone 15', 'entity_type': 'Product'}, {'entity_name': '续航能力', 'entity_type': 'Feature'}, {'entity_name': '摄影功能', 'entity_type': 'Feature'}, {'entity_name': '2024-10-26', 'entity_type': 'Date'}, {'entity_name': '6000元', 'entity_type': 'Price'}], 'extracted_relations': [{'source': '张先生', 'target': '续航能力', 'relation_type': 'interested_in'}, {'source': '张先生', 'target': '摄影功能', 'relation_type': 'interested_in'}, {'source': '张先生', 'target': '6000元', 'relation_type': 'budget_range'}, {'source': 'iPhone 15', 'target': '续航能力', 'relation_type': 'has_feature'}, {'source': 'iPhone 15', 'target': '摄影功能', 'relation_type': 'has_feature'}]}
        # print(resp)
        # await graphiti.build_indices_and_constraints() # delete_existing=True: 首次执行时删除旧约束重建
        # print("111")
        # bulk_add_episodes()
        # 使用 await 来调用异步方法 add_episode
        try:
            resp1 = await graphiti.add_episode(
                name="用户咨询记录",
                episode_body="王强在2025-10-26日来电，表示对Xiaomi 17 pro max的续航能力、散热、音质和摄影功能非常感兴趣，他的预算是5000-7000元。",
                source=EpisodeType.text,
                source_description="客户服务对话记录",
                reference_time=datetime.now(timezone.utc)
            )
            # 成功添加片段: episode=EpisodicNode(uuid='d9acca4b-7f81-420c-8f4c-85f184acfd71', name='用户咨询记录', group_id='', labels=[], created_at=datetime.datetime(2025, 10, 30, 2, 28, 47, 588698, tzinfo=datetime.timezone.utc), source=<EpisodeType.text: 'text'>, source_description='客户服务对话记录', content='客户张先生于2024年10月26日来电，表示对iPhone 15的续航能力和摄影功能非常感兴趣，他的预算是6000元。', valid_at=datetime.datetime(2025, 10, 30, 2, 28, 47, 588698, tzinfo=datetime.timezone.utc), entity_edges=['d778abbb-dcce-4dce-8500-663972d1fe11', '7f14d5d3-6c8f-4136-b6c7-8166a9677dc2']) episodic_edges=[EpisodicEdge(uuid='f2be4594-5fb4-4eab-b240-bb494ebad268', group_id='', source_node_uuid='d9acca4b-7f81-420c-8f4c-85f184acfd71', target_node_uuid='09d46978-9866-415d-ab6f-c0c767489e9a', created_at=datetime.datetime(2025, 10, 30, 2, 28, 47, 588698, tzinfo=datetime.timezone.utc)), EpisodicEdge(uuid='6d49cd2f-f19a-407d-93d8-43fd68022506', group_id='', source_node_uuid='d9acca4b-7f81-420c-8f4c-85f184acfd71', target_node_uuid='0d99e65c-50f1-4497-9501-6c2b6c6b41fa', created_at=datetime.datetime(2025, 10, 30, 2, 28, 47, 588698, tzinfo=datetime.timezone.utc))] nodes=[EntityNode(uuid='09d46978-9866-415d-ab6f-c0c767489e9a', name='张先生', group_id='', labels=['Entity'], created_at=datetime.datetime(2025, 10, 30, 2, 33, 21, 801588, tzinfo=datetime.timezone.utc), name_embedding=[-0.050071917, -0.025172794, -0.0110415, -0.01949343, -0.00725679, -0.060616378, -0.026270848, 0.057400875, -0.051272936, 0.09376063, -0.029445285, 0.00028226819, 0.11512406, -0.009701427, -0.059313357, 0.045131497, -0.05055447, 0.09641675, -0.021150269, 0.016034903, -0.014532279, -0.06781433, -0.030919129, -0.024274716, 0.023721956, 0.008492106, 0.055184644, 0.19379504, -0.012246878, -0.0241064, 0.028417809, 0.0015029634, 0.004186375, -0.02631598, -0.051561408, -0.0099007245, -0.014760665, 0.01565514, 0.006920404, 0.04671343, 0.01924443, 0.0049537625, 0.0055059167, 0.0006656692, -0.011882236, -0.015672464, 0.0019815222, 0.017685203, 0.041972827, 0.029006578, -0.017990703, 0.006014386, 0.046244543, 0.0035351932, 0.0038992988, -0.069242984, 0.011412173, -0.05082358, 0.06829366, 0.0031857658, -0.06768854, -0.015914936, -0.034991037, 0.023012737, -0.005171701, 0.022085797, 0.023087913, -0.017524865, -0.053205274, -0.014821384, -0.012692557, -0.021891283, -0.004992182, 0.016697772, -0.013066489, 0.006443416, 0.00883629, 0.031639807, 0.034161534, -0.04071646, 0.0023391973, -0.0047735316, -0.030600794, -0.022211432, -0.012576592, 0.029595753, 0.03960959, 0.033749003, -0.001028424, 0.024046173, 0.028845927, 0.035413835, 0.033574644, -0.021151712, 0.037514664, -0.010976007, -0.032018885, -0.024860052, -0.01817192, 0.0022472779, -0.0077917273, -5.623331e-05, -0.044064343, 0.08016642, -0.08689766, 0.039671566, -0.08733881, 0.03087018, -0.017971428, 0.0027338944, 0.008097248, -0.008767208, -0.0114456145, 0.003557621, 0.021132117, -0.050109398, -0.029844342, -4.848256e-05, -0.024828274, -0.0058228, -0.020142052, 0.042226594, -0.03850864, 0.008932881, 0.001299566, 0.033346437, -0.059869673, 0.02143685, -0.002993872, -0.042024538, 0.024873007, -0.08898992, 0.0041729854, -0.021560619, 0.010721424, 0.027593065, 0.012005972, -0.030308083, 0.036536343, -0.005637256, -0.034167126, -0.018944751, 0.028175246, -0.017745167, -0.014024639, 0.02603293, -0.018693637, -0.018685313, 0.055468246, 0.011854912, -0.00093535264, 0.021978155, -0.03279104, -0.034018688, 0.0012687714, -0.0149354935, 0.003878288, 0.010406178, 0.0057270397, 0.01690631, -0.02036662, 0.017787635, 0.012109267, -0.03189288, -0.021874363, 0.027758272, -0.05396443, -0.049122725, 0.0046689785, -0.019605929, -0.044208713, 0.021156091, 0.020372044, 0.016701713, -0.0062522287, -0.0042733657, -0.072909236, -0.019461703, 0.004204348, -0.0046171467, 0.016253741, -0.0212492, -0.006534944, 0.015652297, 0.016004162, -0.056095794, 0.0019353515, -0.032540508, -0.0021665716, 0.029824952, -0.03347197, 0.009111026, 0.01580412, 0.02767969, -0.005840198, -0.009580393, 0.021164684, 0.009077795, -0.002947876, -0.017619196, -0.029290121, 0.013912724, 0.0050487383, 0.011304996, -0.019102031, -0.01779083, 0.046012115, 0.0019737803, -0.018297536, -0.01671075, -0.0344639, 0.06047852, -0.0175431, -0.010501993, -0.024891594, -0.0036110133, -0.008400929, 0.017244892, 0.01616053, 0.025407169, 0.018589012, -0.010010827, 0.03505403, -0.007725382, 0.018260967, -0.054457296, 0.02348305, -0.021294283, 0.025838014, 0.027402813, 0.012042749, -0.044935208, 0.028416028, 0.02164433, 0.04657217, 0.003002841, 0.02187428, -0.029930033, 0.03529171, -0.010639923, 0.0005906223, -0.0006593333, 0.0048462963, -0.009625288, -0.027161134, 0.039704714, 0.008055679, 0.01466433, -0.026064755, 0.023103768, 0.06856311, -0.032084085, -0.023558233, -0.009082557, 0.0027645004, -0.0011357049, 0.0053819166, -0.029720118, 0.022003524, 0.030653728, 0.033132493, -0.0083935615, 0.0094226785, 0.020873701, 0.035669904, -0.006499468, -0.03695247, 0.06099244, -0.028461084, -0.018074201, -0.0062706135, 0.001156954, 0.02582544, 0.028652795, -0.012871059, 0.035209738, 0.0301999, -0.060841817, -0.007227377, -0.0053494917, -0.06564347, -0.025993347, 0.024250662, 0.015949618, 0.03597226, 0.035699073, 0.020917103, 0.022173546, 0.026435252, 0.011482205, -0.022787653, -0.00051564834, -0.022015316, -0.008585469, -0.024535056, -0.018012749, 0.04058431, 0.08054994, -0.044701565, 0.011323326, -0.052337363, -0.033053886, 0.03702763, -0.032503292, 0.053110212, -0.018230515, 0.07778335, 0.014034103, 0.013612012, -0.027071437, 0.064442575, 0.017006375, 0.034952264, -0.0037741335, -0.01485332, -0.010374925, -0.020572476, 0.03189221, -0.009130978, -0.0072279787, 0.023095747, -0.049079545, 0.004092043, 0.063444555, -0.06750094, -0.016584735, 0.027741436, -0.01348522, -0.032813776, -0.008557138, -0.050549865, -0.010092043, 0.008001728, 0.02848968, -0.02963114, 0.056769602, 0.05796111, 0.03837447, 0.0268406, 0.030134536, 0.008929105, 0.06259283, -0.0306133, 0.023594726, -0.07915173, -0.04029775, -0.013177212, -0.0066758464, 0.022827286, 0.03543444, -0.028795807, -0.006725266, 0.013800552, -0.024258537, -0.07249962, 0.004110321, -0.004043418, -0.024998236, -0.040889904, -0.02074967, -0.016792405, -0.10130027, 0.016003687, -0.014411547, -0.047973596, 0.04208407, -0.038328502, -0.039283603, -0.010840641, -0.0025185342, -0.049171183, -0.03723195, -0.034709472, 0.017406968, 0.013439321, 0.010824962, 0.075340316, -0.020346224, 0.05139677, -0.028748272, -0.011804484, 0.013063626, -0.016694494, 0.01214898, -0.0064701284, -0.0046133585, -0.0013883411, 0.037056167, -0.019715188, -0.01783703, 0.0025061795, -0.025928931, -0.0049912557, -0.021743052, 0.0161432, -0.0154373245, -0.124690875, -0.05014751, 0.008845617, 0.03069634, -0.015419754, 0.008152452, -0.003974043, 0.01279104, 0.027779918, -0.017363982, -0.005531539, -0.026137704, -0.019393345, -0.017232768, 0.022122728, -0.023495508, -0.03077492, 0.04327933, 0.016793903, -0.00046519563, 0.13359426, -0.019427203, 0.06130779, 0.01770697, -0.028850883, -0.0130851865, -0.003476985, -0.07599718, -0.024918849, -0.01656724, 0.00024139768, -0.032691907, -0.037427664, 0.02548922, -0.0076609673, -0.00015771696, -0.05426178, -0.0080295475, -0.060919605, 0.022918155, 0.04813529, -0.06077494, 0.006359358, -0.032244936, -0.067154795, 0.032322075, -0.006442052, -0.05476806, -0.009055155, 0.0034107342, -0.017403273, 0.011528072, -0.034266327, -0.026143236, 0.023451425, -0.017261185, -0.0026351481, -0.039451744, -0.02962384, -0.07308069, -0.0022145978, 0.0089018475, -0.01921036, 0.002028574, -0.042330083, 0.046236392, -0.007652415, 0.018062873, -0.008393201, 0.03370074, 0.007028961, -0.0070323, -0.01668357, 0.011846378, -0.053487338, 0.015791181, -0.0035614998, -0.004622929, -0.0086711915, 0.02307167, -0.043909475, 0.010630501, -0.01395486, 0.042880293, -0.012422933, 0.030942554, -0.02061917, -0.00434751, 0.04080558, -0.04092522, 0.01102593, 0.005869571, 0.00029969183, -0.0011369552, 0.042141315, 0.02313292, 0.007896998, -0.03213408, 0.0164242, -0.007041618, -0.006847395, -0.031259887, -0.07273918, -0.0309788, -0.04261337, -0.0075041773, -0.016626991, 0.0070165293, 0.001535147, 0.03324966, 0.015631227, -0.028940743, -0.008889283, 0.017344488, -0.0017368499, -0.041152865, 0.017507618, 0.03700427, 0.0057551377, -0.009386705, -0.012082146, 0.049015496, 0.012162246, -0.0040581226, 0.0043538795, 0.039883215, -0.015476052, -0.029191628, -0.006939294, 0.05159398, 0.011560553, -0.023221988, 0.04236734, 0.030643756, 0.030047456, -0.013077786, -0.011501637, 0.033992894, 0.0019106519, 0.023955608, 0.014090804, -0.007303495, 0.007086998, 0.0011018824, -0.011203079, -0.015229278, -0.03330279, -0.020433867, 0.0013320198, 0.016259123, -0.008730184, 0.036723867, -0.014359548, 0.020365173, 0.030330727, 0.0009851394, 0.03354182, -0.024407662, -0.0022552342, 0.013353303, 0.05228468, -0.041696742, 0.028502896, -0.028239215, -0.0019146896, -0.05227142, 0.024135383, 0.010844518, 0.0044860663, -0.00049918995, 0.05890528, 0.022330498, 0.042846505, 0.0014633227, 0.035231374, -0.021852484, 0.00051626575, -0.0026954105, 0.051005114, -0.04487825, -0.0029355432, 0.020335732, 0.0054890355, -0.0020856801, 0.016529778, -0.032032896, -0.013451706, -0.01126538, -0.028237531, -0.039552614, 0.024923664, -0.0011553044, -0.01422749, -0.048249688, -0.016118342, -0.08464552, 0.020128764, 0.002132087, 0.04884522, 0.01628108, 0.009971536, 0.008531385, -0.058446344, -0.01789565, -0.005603936, -0.0050160936, 0.05526586, 0.023901794, -0.022827726, 0.058394775, -0.0077687525, -0.013967754, 0.0029070242, 0.025410859, -0.027055087, 0.017018907, -0.08203304, 0.017117802, -0.035410367, -0.030302668, 0.02245267, 0.0010485938, 0.008169521, -0.09719835, -0.01362348, -0.0008232808, 0.0316607, 0.010788897, -0.024936736, 0.031840704, -0.0005475509, -0.046469383, -0.021341365, 0.00087097066, -0.040184293, -0.03403331, -0.035754796, 0.021391114, -0.0029067013, -0.0023939945, -0.06631263, 0.017662305, -0.003229978, -0.027601626, 0.0058881994, 0.00865318, -0.004273569, 0.009355494, 0.032425992, 0.009216619, -0.018287713, 0.019608175, 0.075654745, -0.046944812, 0.004588034, 0.0007491522, -0.024059143, -0.006109914, -0.024944015, 0.02500768, -0.023701584, 0.024966374, 0.026805324, -0.035703883, -0.0049033877, -0.03997164, 0.038578056, -0.02994394, -0.0151021285, -0.011651795, 0.0190817, 0.054093886, 0.041673843, 0.008638905, -0.05106398, -0.02535823, -0.025120223, 0.03876006, 0.022782853, -0.04363961, -0.026319327, -0.084931254, -0.01148163, -0.07825473, 0.009536798, 0.01367039, -0.07632385, 0.016387029, 0.0055121295, -0.0053094625, -0.045794543, 0.005046791, 0.041417528, -0.026954215, -0.035235114, -0.020537812, 0.0071718604, -0.026954358, 0.0130412625, 0.027224563, -0.0036030135, -0.031027926, 0.020462403, -0.01122665, -0.008830504, -0.0009081066, -0.03378902, -0.00859424, -0.031224906, 0.003487345, 0.0007847107, -0.062494125, -0.0034885518, -0.028638775, 0.03215239, 0.049558356, -0.047389675, -0.03523915, 0.03074405, 0.03743685, -0.005499988, -0.017817346, 0.0056779776, -0.010642567, 0.012014927, 0.0010273786, 0.07572191, 0.065666676, 0.0053904327, -0.02455975, 0.011920086, -0.017156232, 0.010664927, -0.020539634, 0.008210451, -0.015546708, 0.02747132, 0.02613167, 0.023590565, 0.012416168, 0.020005828, 0.07258987, 0.016019821, -0.01574006, 0.029600764, 0.002223077, 0.00044709467, 0.018406026, 0.035136044, -0.004365297, -0.0077127363, -0.047738872, -0.01774786, 0.011932736, 0.060535945, -0.06048238, 0.005114928, 0.000628883, -0.016082196, -0.033052087, 0.0063990746, -0.0049361824, 0.030520236, 0.0053657135, -0.01139856, -0.015975546, -0.0010290194, 0.04617353, 0.041706197, -0.028572703, 0.035575364, -0.046203878, 0.034858566, 0.00152933, -0.013731838, 0.0094571635, -0.0012876571, 0.03921529, -0.012745227, -0.015734682, 0.044160113, -0.004305457, -0.05967479, -0.0016261212, 0.042710118, -0.034836933, 0.05762672, 0.0014087253, 0.0059963516, 0.014029845, 0.00040492302, 0.011299426, 0.015511005, 0.016234495, -0.02570337, 0.013421015, -0.029199027, 0.034026593, -0.061735637, 0.015967691, -0.010419162, 0.015183334, -0.028263755, 0.045443416, -0.0038923086, 0.030328175, 0.035369534, -0.010706948, 0.008328065, -0.027533315, -0.03089205, 0.0060576648, -0.01888098, 0.010880055, 0.033224992, 0.018157668, -6.4338434e-05, 0.06422921, -0.04012515, 0.012060857, -0.054365616, -0.0138560785, -0.008113712, 0.0072725574, 0.029212926, 0.016273428, 0.02288772, 0.026308807, -0.011283738, 0.00088107184, 0.0008424065, 0.0062012807, -0.059485983, 0.0138394, 0.0066816434, -0.024764448, 0.0064400304, 0.044576406, 0.051639, 0.028576199, -0.04103418, -0.009257127, -0.0076117683, 0.02775985, 0.023533223, -0.046062697, 0.012719906, 0.001885044, -0.004938821, 0.011627804, -0.022910522, 0.007825751, 0.038344637, -0.008178718, 0.029257862, 0.026120497, -0.025563989, -0.025287494, -0.0654125, 0.008650612, 0.083225474, 0.03729796, -0.0010410491, 0.021671016, -0.018040793, -0.016861167, -0.0972092, -0.017431108, -0.012107688, 0.013750868, -0.010860566, -0.023864923, 0.014347329, -0.014894639, -0.0016692234, -0.010944678, 0.029931497, 0.051284824, -0.006710176, 0.035573486, 0.027777636, -0.014927005, -0.026581839, 0.06191206, -0.030434703, 0.023323406, 0.024053877, 0.004211762, -0.0056590233, -0.0017936617, 0.010524522, -0.0012334145, -0.0034635873, 0.006397347, -0.0075196703, -0.0018849552, 0.0027156384, -0.016966304, -0.06946681, -0.019547323, -0.00865772, -0.020060075, 0.03269855, -0.028270133, 0.017815823, -0.016490666, -0.009803183, 0.005519528, 0.037492994, 0.036510017, 0.0482374, 0.00228243, -0.008833483, 0.0043888753, -0.015817756, 0.006562108, 0.039843075, -0.04183582, 0.002050259, -0.018525407, -0.023984205, -0.05689955, -0.0186841, -0.04944753, 0.0007589047, 0.022956837, 0.020845473, -0.0052844505, 0.059476186, -0.0063154213, 0.025944924, -0.0063695027, -0.05810907, -0.0008108103, 0.017053803, -0.03474112, -0.013105397, 0.041196387, -0.01928923, -0.02075479, -0.010917374, -0.0050464473, -0.0044687847, 0.012234367, 0.032173038, -0.012955258, -0.0045145117, 0.016932452, 0.01754044, 0.019446123, 0.0070464322, -0.0069626835, 0.01709764, 0.014792398, 0.03679557, -0.014330372, 0.05145651, 0.007972609, 0.025116036, -0.020219363, -0.0013033336, 0.0032838574, -0.023634486, 0.041300595, -0.007706372, -0.016738553, 0.03849758, 0.027859958, 0.0525752, -0.009876978, -0.0063403095, -0.01836467, -0.0077862935, -0.0008310022, 0.020476347, 0.012038299, 0.03896949, 0.02103766, -0.021141037, 0.021929923, 0.039619867, 0.0027161525, -0.048889916, -0.0032115162, -0.04373915, -0.019443877, 0.031805687, 0.009725987, 0.010023936, -0.024482416, -0.013946989, 0.018448396, 0.028240563, -0.018194668, 0.012371357, 0.030542951, 0.049380053, 0.0015566516, 0.01464837, 0.01203924, -0.02215596, 0.028840562, 0.03392662, -0.046083678, -0.016703153, -0.015506038, -0.00959604, 0.036515206, 0.040074363, 0.009944866, -0.048452083, 0.025338253, -0.022439547, -0.042422984, -0.015505757, 0.0020477022, -0.0048573264, 0.014497469, -0.007413359, -0.033621754, -0.0025716305, 0.0154186245, 0.02098137, -0.015405529, -0.01150338, 0.013209463, -0.01958689, 0.020827763], summary='', attributes={}), EntityNode(uuid='0d99e65c-50f1-4497-9501-6c2b6c6b41fa', name='iPhone 15', group_id='', labels=['Entity'], created_at=datetime.datetime(2025, 10, 30, 2, 33, 21, 801588, tzinfo=datetime.timezone.utc), name_embedding=[-0.05525704, -0.01384412, -0.010522007, -0.06771956, 0.031567857, 0.005612561, 0.04002259, 0.0802217, -0.076834746, -0.013154324, -0.006992905, 0.004505983, -0.0050221225, -0.008810249, -0.052692622, 0.03446743, -0.023816343, 0.07647139, 0.036129374, 0.07108493, -0.03966401, 0.047373485, -0.008728269, 0.12383774, -0.014546766, 0.017153228, -0.07523041, 0.088062525, 0.032920096, 0.008510738, 0.0125594335, 0.043772418, -0.032760914, -0.019504959, -0.004813592, -0.0119713, 0.03497119, -0.011695689, -0.011832087, 0.029898863, -0.0014906813, -0.017536025, -0.05662038, 0.012196944, -0.0395382, -0.0413352, 0.04118485, 0.017829804, 0.06840348, 0.03538525, -0.008990006, -0.016440127, -0.0067573665, -0.001091838, -0.005674016, -0.012380048, 0.033353228, 0.017655406, 0.046784792, 0.014169376, -0.11841026, 0.081123136, 0.05910928, 0.026114685, 0.011502932, 0.0803947, 0.014656869, 0.025028823, 0.0070702555, -0.014996258, -0.019557009, 0.06131371, -0.021773983, 0.0017584988, 0.0018268119, 0.04330959, 0.015041398, -0.024793575, 0.0035373145, -0.0016489066, 0.0076562823, 0.08205249, 0.0027252077, 0.01702389, -0.014665211, 0.054738007, 0.035363637, -0.039706524, -0.055505432, -0.012916058, 0.015930995, 0.010213112, -0.029339286, -0.008487029, -0.019632014, 0.011202726, 0.005934455, -0.014341819, -0.022978906, -0.008036583, 0.0018646836, -0.014436915, -0.029664185, -0.03454517, -0.070246615, 0.046453472, -0.057753008, 0.0026888843, -0.08559165, -0.036911055, 0.0062306197, 0.0093106385, 0.0069586644, 0.014602516, -0.019760758, 0.0152709475, -0.00850191, -0.02907701, -0.02461835, -0.011475181, 0.017752565, -0.029497351, -0.038590826, -0.024555763, -0.023768328, 0.025335971, -0.027640153, -0.017463665, 0.036311597, -0.031936478, 0.026776059, -0.0449475, -0.01444068, -0.0013306855, 0.00049383927, 0.006013936, -0.012422533, -0.0013998115, 0.03288665, 0.013724368, -0.011513378, -0.0011941796, 0.0043352605, -0.03106047, 0.010724452, 0.014961393, -0.035115313, -0.006325222, 0.021328853, -0.02005094, 0.042905483, 0.010054738, -0.06552968, -0.018607656, -0.018823087, 0.04340396, -0.02506152, -0.024930084, 0.011224905, 0.01261625, 0.014007802, -0.0031666814, 0.0043092975, -0.025305795, -0.009992972, 0.011485097, -0.026391374, -0.035354756, -0.025983918, -0.004929374, -0.03874986, 0.029424248, 0.013095481, 0.014195376, 0.004376729, -0.02704879, -0.031786595, -0.06102043, -0.021997163, 0.02678117, 0.022777827, 0.010378642, -0.0017568683, -0.006403069, -0.031364366, -0.009761184, 0.014630867, -0.012295322, -0.003586613, -0.027930548, -0.019586604, -0.011870268, -0.030138602, -0.002324618, -0.024161886, -0.044317696, 0.0672734, -0.0042921635, -0.011319868, -0.005108574, -0.012127065, -0.016623257, -0.0071439547, 0.017221063, 0.01022291, 0.0029770928, 0.033732984, -0.0030011158, -0.017879795, -0.0020063082, -0.0045594857, 0.013702313, -0.040141657, 0.035965018, -0.008696942, 0.013942254, 0.0018862849, 0.029141773, -0.004418535, 0.012058445, 0.05709716, 0.012510191, -0.04475138, -0.015180728, 0.027100837, -0.04641278, 0.0117376, 0.0022307208, 0.0036381308, 0.03701342, 0.028693588, -0.014601688, 0.0015238781, 0.008585884, 0.048670463, -0.016022654, -0.007705669, 0.05142907, 0.029982936, 0.013525813, -0.023384599, -0.025470516, -0.036397424, -0.023127733, -0.021706592, 0.007394834, -0.023095967, -0.050454922, -3.8451697e-05, 0.0073115, -0.008928866, -0.073845685, -0.031471685, 0.0390366, 0.0066735763, 0.011371918, 0.0058464617, -0.021705385, -0.021796666, 0.011861148, 0.028354736, -0.04951837, -0.046313714, 0.028171737, 0.044026732, 0.011893731, -0.014123083, 0.016297625, -0.010457188, -0.009133157, 0.010744833, 0.034237105, -0.01612695, -0.0077522695, 0.00047908234, 0.019076448, 0.020657677, -0.119149655, 0.014140291, 0.06277582, -0.066135325, -0.048293997, -0.045225818, -0.024743538, 0.0026747086, 0.026213357, 0.0058668368, 0.009253611, -0.01700812, -0.022066284, -0.01436797, -0.07057339, -0.015341144, 0.022170572, -0.027188117, 0.05145444, 0.011989009, 0.029701049, 0.019507714, 0.05424566, -0.008452224, 0.016366044, -0.005434913, -0.03252483, 0.045456745, -0.021454317, 0.06414176, -0.019074136, 0.055869926, -0.027793307, 0.04136304, -0.018381063, 0.008499254, -0.0095441835, -0.020814981, -0.018257815, -0.00180278, 0.05699661, 0.026099216, -0.014916957, -0.010108672, 0.06254746, 0.007981279, 0.0006249463, -0.031081922, -0.0021784455, -0.036242064, 0.009881135, 0.015704885, -0.025080783, 0.0026060191, 0.023994207, 0.06411567, -0.025538318, -0.005091715, 0.044253483, 0.0069607818, 0.03839404, 0.046454526, -0.024398468, 0.045059167, -0.004846058, -0.0404452, -0.04675444, -0.00672007, -0.022510458, 0.0027219153, 0.05671577, 0.009457706, -0.007705155, -0.0728936, 0.018048024, 0.01997989, -0.009735576, -0.018869681, 0.002699002, -0.017593946, 0.01909044, 0.00509852, -0.004926907, -0.032941967, -0.06920186, 0.014712979, -0.031953428, -0.031030996, -0.012943986, -0.039809752, -0.039128613, 0.04086317, 0.026519967, -0.09829869, 0.021853505, 0.023752175, 0.013338841, 0.043158498, 0.07730313, 0.04302944, 0.040730905, 0.027388508, -0.010521336, -0.026800774, 0.028199935, 0.017230125, -0.0052283206, 0.01188544, -0.003446553, -0.0049362476, -0.0024828166, -0.029200718, 0.0169465, 0.024653839, -0.011943991, 0.034836728, -0.0016619329, 0.0109104905, -0.00048001955, -0.055307332, 0.010813508, -0.025732372, 0.017652832, 0.005440161, 0.0265146, -0.043990437, 0.030631218, -0.024939993, 0.000304618, 0.038401578, -0.032419544, 0.04847801, -0.00666663, 0.048662826, -0.030255666, -0.0246741, -0.01052083, 0.048834573, -0.034167837, -0.014692625, 0.0010410096, -0.011654371, 0.02402048, -0.010074181, 0.08371078, -0.049196966, -0.07805339, 0.032138098, 0.03274911, 0.017280031, -0.08230188, -0.020049116, 0.06767082, -0.0036249345, -0.057218257, 0.005983206, 0.024425646, -0.024530178, -0.011409444, 0.030728728, 0.014547019, 0.027388914, -0.0066915783, -0.032291867, 0.020270854, -0.047229532, -0.046712235, -0.016313579, -0.01515164, 0.011764343, 0.06644462, -0.008061085, 0.03711516, 0.032021515, -0.05207006, -0.027558845, 0.010260138, -0.020933524, -0.01587978, -0.008772283, 0.04093706, 0.014962735, 0.014936325, -0.008976819, 0.015876448, -0.03598231, -0.0074273134, 0.015588152, 0.04276848, 0.008726662, 0.024864072, 0.013980372, 0.0038377212, -0.02189279, 0.040804006, -0.030000454, -0.0014948332, 0.0066236276, 0.031563807, -0.04197492, -0.027579287, -0.041299555, -0.02802829, 0.012481923, 0.0065437164, -0.023352604, -0.025949223, 0.08716596, -0.0035723434, 0.002090794, -0.027633993, -0.028050952, 0.009451271, -0.01619345, 0.039230786, -0.031149281, -0.041290462, 0.012682825, 0.0031507493, -0.004294717, -0.021920232, -0.0473583, -0.008419534, 0.027594369, -0.00012333957, 0.031106275, -0.030240254, 0.0028213414, 0.0034269206, 0.027971542, 0.01492576, 0.032209434, 0.011803399, -0.02725583, -0.039420363, -0.050759643, 0.013591773, -0.020986179, -0.035631094, -0.006882319, 0.010714635, -0.06477696, 0.021566464, 0.022140343, 0.03142807, -0.00038896163, -0.019929575, 0.0055019273, 0.07924329, 0.016616164, -0.0029985064, -0.011297958, 0.02520804, -0.0011269085, 0.057255227, 0.033576436, 0.023493536, -0.031935923, 0.04188773, 0.043129947, -0.029134076, 0.035535604, -0.03121319, 0.0045267125, -0.0015729141, -0.04228024, 0.013718622, 0.027875172, 0.009906089, -0.036012042, 0.020019513, -0.02966482, 0.0349665, 0.018632622, -0.033223752, 0.08321771, -0.029137874, -0.008324319, -0.03161233, 0.027268246, 0.03292738, 0.05223612, -0.0034457098, -0.01560962, -0.00918862, -0.024810156, -0.022756768, -0.0043610013, -0.019976966, 0.038802136, -0.0006380325, 0.026227864, -0.008066632, 0.04223647, -0.011940988, 0.029469378, 0.025059965, -0.018037854, -0.044141177, -0.046931647, 0.051140234, 0.001593808, -0.03795971, -0.030674282, 0.004878042, -0.0760931, -0.004133485, -0.019330004, 0.01859247, 0.00043078873, 0.012938477, 0.05056533, 0.025876017, 0.002140954, -0.027727487, -0.019910146, 0.0039348477, 0.059157073, 0.0019151487, -0.049059637, -0.010509149, 0.005264484, 0.028384639, 0.031644642, 0.062411834, -0.033167265, 0.042988725, -0.064484484, -0.00021079832, -0.028322373, -0.007226131, -0.03404813, -0.011929607, 0.00036395437, -0.03340137, 0.0019271391, 0.032567047, 0.00743506, -0.026990458, -0.005210435, -0.0054205284, -0.01111748, -0.05031006, 0.04227933, -0.005199226, 0.0026504134, 0.037190273, -0.034360185, 0.0142720435, 0.009214274, -0.0033254134, -0.001590669, 0.008840242, -0.0559271, 0.00829689, -0.004154184, -0.021644678, 0.033474375, -0.012677147, 0.004020082, 0.016867584, 0.031096214, 0.005670206, -0.019064698, -0.059536893, 0.021046426, -0.026097221, 0.0034236596, 0.013868841, -0.007897517, 0.0070581753, 0.039717898, -0.016734714, 0.051433485, 0.022413732, -0.03354732, 0.015326846, -0.031328592, -0.0044242097, -0.040071785, 0.02280513, 0.02907778, -0.06401672, 0.020166533, -0.10953483, 0.024613576, 0.0006929122, 0.00012021567, -0.038116205, 0.006250799, 0.029573144, -0.0063485103, -0.044814814, 0.02870007, -0.00985923, 0.016733082, 0.0042914012, 0.022285076, -0.010603504, -0.040279422, -0.019178582, 0.038514215, -0.030982785, -0.016999977, 0.016065909, 0.03502322, -0.062573284, 0.052233707, -0.023215393, -0.034304813, 0.04733644, 0.031748623, -0.016574299, -0.05204843, 0.009248683, 0.01766625, -0.030489229, 0.0026936564, 0.028964672, 0.010477595, -0.017044106, -0.0046870504, -0.032085516, 0.0020781392, -0.0149203185, -0.044450946, 0.02044155, 0.02239157, -0.00047813237, -0.03726005, -0.0093870405, -0.05934098, -0.05115624, 0.04474521, 0.019145802, -0.023622721, -0.0013572999, -0.0031772677, 0.03929718, -0.01578325, -0.045692742, 0.008393649, 0.0015819013, 0.016186934, 0.010413395, 0.06188282, 0.036546785, -0.0315939, 0.017767208, 0.008054853, -0.0009623703, 0.048039336, -0.026310557, -0.0016340067, -0.029117942, -0.003191751, -0.007046746, -0.008015403, -0.014113083, 0.049951687, 0.038759004, 0.015427974, -0.01057169, 0.009671552, 0.035779305, -0.02036121, -0.06931322, 0.02407246, 0.03831029, -0.0005717536, -0.00989024, 0.0046872254, 0.017963748, 0.031137325, -0.01021385, -0.010586355, 0.032809824, -0.03410966, -0.008321174, -0.05107893, -0.0060329307, 0.021375356, 0.008109339, -0.020211646, 0.025238577, 0.007006548, -0.020555496, 0.046259787, 0.023066822, 0.034193326, -0.033338714, 0.018737603, 0.0007723161, 0.056950584, 0.019115161, 0.015783718, 0.0684708, 0.014227675, -0.025422987, 0.02297013, -0.050616708, -0.010218534, -0.03103985, 0.014507599, -0.03471817, 0.02388948, 0.013857749, -0.01253041, 0.051720187, 0.016434725, 0.018057318, 0.037766878, 0.014177551, 0.028259495, -0.0085232, -0.012611887, 0.053121433, -0.010882375, 0.036096845, 0.00078323396, -0.0042853127, -0.050647635, 0.0005095161, -0.02151505, 0.027994966, -0.011471394, -0.0067777, 0.073442206, -0.011611034, -0.020545805, 0.041552607, -0.0066237985, -0.013552466, 0.065780714, 0.06730268, -0.030502832, 0.016626593, -0.0017561394, 0.014757285, -0.0014654258, 0.020516228, -0.032554265, -0.0013230748, -0.03813345, 0.0067095803, 0.041931015, 0.0147566395, -0.047644038, 0.011666073, 0.023821414, -0.005222775, -0.07991848, -0.032038756, 0.015749922, -0.00433944, 0.056394372, 0.043011654, -0.008637865, 0.0037675276, 0.01721705, 0.008986898, -0.013734345, 0.013441902, 0.008587252, -0.0044887397, -0.029825024, -0.016452525, -0.051773313, 0.01962205, -0.022172268, 0.018166414, 0.0069950493, 0.022608869, 0.030520538, 0.048397627, -0.057489105, 0.0114083225, 0.0006413509, 0.029211814, 0.037356146, 0.02045457, -0.01676852, 0.015078505, -0.057514306, 0.026127681, -0.008029977, -0.025741912, -0.03436674, 0.0662842, -0.022523507, -0.031314798, 0.014345344, 0.0067849657, 0.04305227, -0.015013214, 0.02572166, 0.069301605, -0.014882471, -0.013056882, -0.035826907, -0.004676184, -0.018547174, 0.03989573, -0.011364985, 0.040718354, 0.02749621, 0.018558186, 0.00605416, 0.0053807762, -0.015809974, -0.033041265, -0.0033457032, -0.00026494093, 0.04889232, -0.03895697, -0.0039398405, -0.024941549, -0.07116142, -0.012825478, 0.0070337155, 0.038986955, 0.019821541, -0.015625281, -0.015214642, -0.009411299, -0.01155645, -0.0619769, -0.03617554, -0.03977755, 0.046935983, -0.009237017, 0.008631287, 0.032863405, -0.05223965, 0.041105807, 0.03137668, 0.024975136, -0.019690676, 0.0021304188, -0.024874093, -0.049427953, -0.0037634978, 0.014785131, 0.023648188, -0.026639305, 0.008517226, 0.015465005, -0.008097085, -0.02321597, -0.031785827, -0.025647204, -0.015695544, -0.0066865906, 0.004389336, 0.010290808, -0.008723034, 0.018705716, 0.021728178, -0.011256344, 0.028072013, -0.048565526, 0.001972796, -0.033359587, 0.008742349, -0.011956344, 0.0140302135, 0.04108171, 0.042948928, -0.02086259, -0.019429144, 0.016675308, -0.006907621, 0.026925808, 0.003924477, 0.030634236, 0.020020518, 0.015584602, 0.003500661, -0.06612237, -0.010991352, -0.0026803317, -0.01624689, 0.007347387, 0.007295919, 0.010304223, -0.004156169, 0.028352475, 0.026654465, 0.01731472, -0.035313394, 0.031736325, -0.004525524, -0.009574987, -0.031165645, -0.028261581, 0.0071092043, 0.026579287, 0.06683376, 0.04684202, -0.0093929395, -0.03379744, 0.0010121904, -0.0008331914, -0.06038447, 0.036932368, 0.03831358, 0.023564244, 0.014879816, 0.0059227603, 0.038145926, -0.007949201, 0.007641185, 0.0019876058, 0.026679546, 0.03497695, -0.0027283793, -0.0052109263, 0.015238319, 0.007413007, 0.0017164007, 0.033565942, 0.04131356, -0.023430267, -0.034522846, -0.024246063, 0.010127867, 0.035229247, 0.027009008, -0.02765886, 0.054104455, -4.975876e-05, -0.0059962324, 0.039185125, -0.005991125, 0.022275282, 0.029721359, 0.016039276, 0.031794567, -0.02018486, -0.03292929, 0.0072164326, 0.012591892, -0.061339356, -0.035828076, -0.017345376, 0.06342356, -0.017646205], summary='', attributes={})] edges=[EntityEdge(uuid='d778abbb-dcce-4dce-8500-663972d1fe11', group_id='', source_node_uuid='09d46978-9866-415d-ab6f-c0c767489e9a', target_node_uuid='0d99e65c-50f1-4497-9501-6c2b6c6b41fa', created_at=datetime.datetime(2025, 10, 30, 2, 38, 7, 358740, tzinfo=datetime.timezone.utc), name='INTERESTED_IN', fact='客户张先生对iPhone 15的续航能力和摄影功能非常感兴趣', fact_embedding=[-0.05277471, -0.045890827, -0.0103929965, -0.019474385, 5.3593303e-05, -0.029808588, 0.038961243, -0.01683531, -0.09527187, 0.026128052, 0.01351488, 0.004300633, -0.017872311, -0.009488785, -0.05725163, 0.019821953, -0.048428804, 0.053089526, 0.010426321, 0.06697027, -0.043265704, 0.0025807836, -0.016628517, 0.013329417, -0.013569626, 0.0012605049, -0.027198263, 0.0938807, -0.00069831725, 0.038299993, 0.017343642, 0.027506556, -0.0628714, -0.023683075, 0.013760168, -0.013016166, 0.0137385195, -0.0057869344, -0.0151046105, 0.038258057, -0.008928268, -0.00041170808, -0.032512963, 0.006548593, -0.019610863, -0.028178977, 0.017154453, -0.0070678317, 0.042666446, 0.022067899, 0.0056042713, -0.034314577, 0.0011585738, -0.014854904, -0.012425449, -0.046226297, -0.01146744, 0.047986597, 0.027229957, -0.015504966, -0.1134506, -0.009452369, 0.016146151, 0.045237444, 0.0037873213, 0.04404647, -0.010400164, 0.041902356, -0.044274844, -0.020286424, 0.011295778, -0.01139533, -0.017827112, 0.019048844, 0.021812202, 0.009410088, -0.003321119, 0.007090662, 0.024813175, -0.029254634, 0.010334415, 0.11023575, -0.0137482975, -0.042659562, -0.013489444, 0.02579742, 0.056945365, 0.00396171, -0.058386363, -0.0027953843, 0.06815146, 0.037185542, -0.06713465, -0.029993512, -0.011851186, 0.041625362, 0.031019872, -0.017812558, -0.029694878, -0.0032462317, -0.01710356, 0.009548537, -0.058598537, -0.015217231, -0.100518785, 0.03307319, -0.093988314, 0.0027631482, -0.03194497, -0.020077268, 0.065621495, 0.014862045, 0.03527841, 0.0016067376, -0.018810889, -0.025069334, -0.04216144, -0.019310182, -0.003861963, -0.020606032, 0.028077597, -0.012597218, -0.032982793, -0.033413105, -0.053743128, 0.014385506, -0.030128395, 0.010947986, 0.01885125, -0.03988, 0.039088037, -0.025146617, -0.023287097, 0.0014607833, 0.004132641, 0.022558207, -0.016794277, 0.0031027421, 0.02175051, -0.008606526, -0.014974305, 0.0046347464, -0.0051714764, -0.030591171, -0.00911687, 0.026328886, -0.02654667, 0.0035502617, 0.0027728716, -0.055571742, 0.010972969, 0.03067988, -0.070197076, -0.023818906, -0.012166527, 0.02439464, -0.0137954885, 0.011691096, 0.0086354045, 0.01256539, 0.014921452, 0.011337339, -0.0008889986, 0.017715983, 0.001090938, -0.0005285743, -0.029138617, -0.03037039, 0.017191984, -0.03478662, -0.033896413, 0.030538367, 0.022939287, -0.026067672, 0.023442982, -0.027991638, -0.019093588, -0.024698382, 0.009766891, -0.025353232, 0.013858782, 0.010787832, 0.00075065444, 0.0141521385, -0.0004998711, -0.05324275, -0.0012732557, 0.007731843, 0.014100671, -0.008628441, -0.019362913, -0.02109933, -0.00033077615, 0.009316946, -0.021752454, -0.03435142, 0.016570102, 0.0012802255, -0.023018263, -0.0005270754, -0.014102414, 0.03400513, 0.029816557, 0.026576309, 0.027738573, 0.0028273826, 0.016640894, 0.027823322, -0.00584279, -0.02036231, -0.052601017, 0.0678292, -0.016589826, -2.4168574e-05, -0.0075716344, 0.0033844549, -0.011583188, 0.024962528, 0.017542401, 0.039584294, 0.036721658, 0.006500069, 0.013591969, -0.019655045, 0.016406246, -0.034290712, 0.012978211, -0.026888995, 0.021443304, 0.04051985, 0.036841817, 0.00507518, 0.045816034, 0.029702047, 0.008801681, -0.03570806, -0.007873599, -0.013513962, 0.04489203, 0.043743305, -0.010399833, -0.04425026, -0.014123306, -0.011979555, -0.032199383, -0.0045495774, -0.02442618, -0.009955544, 0.010406988, -0.04514488, -0.012193153, -0.043237276, -0.03834971, 0.020542275, 0.023497757, -0.0131666325, 0.0006673126, -0.019867653, -0.008109267, 0.020933399, -0.0043187873, -0.029895352, -0.013807116, 0.034814835, 0.05215808, 0.006513178, -0.015854426, 0.0033065032, -0.037537258, -0.0011237429, -0.05774573, 0.02583506, -0.03627073, 0.013132991, -0.0016336108, 0.0038974136, 0.027988719, -0.07949899, -0.0069302837, 0.06423252, -0.06529558, -0.02949983, 0.0056714993, -0.049487274, 0.026786372, 0.018256314, -0.009878407, 0.009037681, -0.014151504, -0.019687578, -0.00063025247, -3.62399e-05, -0.012930479, 0.03301585, -0.03429302, -0.030086007, 0.030823126, 0.043663517, -0.007404037, 0.0008908653, -0.026444053, 0.01237343, -0.016759498, -0.045422345, 0.06605477, -0.002574693, 0.062386032, -0.040684532, 0.05407189, -0.048821248, 0.06422695, -0.0048630824, 0.02907471, -0.006797168, -0.05217885, -0.004342647, 0.0029503026, 0.056837108, 0.045918666, -0.015253437, -0.01582318, 0.02180103, -0.009367788, 0.0008108938, -0.026857348, -0.00584785, -0.017694132, 0.020566301, 0.021042444, -0.049586553, 0.025212782, -0.013758106, 0.053184025, -0.02201412, -0.021786178, 0.05605329, 0.02813412, -0.002116208, 0.006411789, -0.02791661, -0.026969444, 0.05842085, -0.021177832, -0.043552317, -0.05654956, 0.047942877, 0.015185023, 0.08197778, 0.01267901, 0.0034756765, -0.059323553, 0.005324353, 0.014670189, -0.02111034, -0.016377358, -0.008462247, -0.022698132, 0.04137792, -0.041799173, 0.0036662193, -0.042884234, -0.07761056, 0.028738197, -0.04075901, 0.021027762, -0.006877809, -0.02582053, -0.058457095, 0.03426699, 0.01690486, -0.05088972, 0.04978406, 0.028005145, 0.029336251, 0.03287892, 0.051957715, 0.040291745, 0.0270068, 0.035768516, 0.011330252, 0.0061515407, 0.031560592, 0.039153773, 0.041072033, 0.05514207, 0.00024136475, -0.016057681, -0.005927739, 0.017886505, 0.031372514, 0.027695132, -0.02356981, 0.029150127, 0.011247026, -0.002435156, -0.054101255, -0.07471399, 0.028676223, 0.0015680103, -0.017489687, -0.029125927, 0.0459714, -0.042766467, 0.032375205, -0.019075437, -0.019370891, 0.02030173, -0.029013846, 0.010517769, -0.0026162048, 0.038259357, -0.034008604, -0.0054342663, -0.01460711, 0.0071143634, -0.035581272, 0.02209635, 0.019387083, 0.018621096, -0.002178953, -0.0032662228, 0.03484166, -0.008265755, -0.13165179, 0.030554386, 0.010741683, 0.006169516, -0.060303837, -0.054967094, 0.006603273, -0.043040983, -0.077778056, 0.010816651, -0.019655919, -0.042179663, -0.016523568, 0.064458996, -0.009105109, -0.028982542, 0.01797441, -0.06597002, 0.00452048, -0.019636143, -0.114336535, -0.023029288, -0.021667354, -0.01765378, 0.029957887, -0.04053577, 0.07148897, 0.012274016, -0.046149805, 0.012637242, -0.000744836, -0.02725953, -0.019290365, 0.013943275, 0.03751951, 0.0035317838, 0.028258067, -0.028230513, 0.04720929, 0.020281967, -0.007856421, -0.0065092207, 0.056136437, -0.034422465, 0.013393066, 0.033994857, -0.011711727, -0.027418997, 0.014290389, -0.008855002, 0.00782668, 0.019801434, 0.015844665, -0.037766974, -0.044844415, -0.03137716, -0.04071089, 0.034781933, 0.015053998, -0.051220987, -0.016581113, 0.061191108, -0.0035124284, -0.0164051, 0.008947978, -0.019050693, 0.011132816, 0.0277887, 0.0121039795, 0.016226994, -0.01584282, -0.011189955, -0.02420289, 0.0011721551, 0.008891053, -0.021690717, -0.05181683, -0.021730794, -0.030960636, 0.072590835, -0.014872691, -0.058329236, 0.020418465, 0.039090123, -0.011726506, -0.0335417, 0.0196667, 0.01743011, -0.0460679, -0.032393806, 0.017558735, 0.013083052, -0.03193552, -0.027179461, 0.021170357, -0.038766712, -0.0010220585, 0.02199939, 0.061666355, 0.014507385, -0.036182456, -0.01635283, 0.09336923, 0.012880211, -0.028828671, 0.034178033, 0.056842543, 0.008103165, 0.0435199, 0.04823972, 0.05402728, 0.012698267, 0.057024024, 0.041128833, 0.0023322098, -0.009889355, -0.040454153, 0.0056888033, 0.015571962, -0.028547548, -0.044245567, 0.0013070593, -0.032102484, -0.03365288, 0.02071695, 0.007144994, 0.015882112, 0.04889666, -0.016699592, 0.039520722, -0.052248083, -0.007226272, -0.014860546, 0.06395168, 0.00914328, 0.031064933, 0.005426927, 0.025041297, -0.023020942, 0.004190452, 0.009169342, 0.031619, -0.0085601015, 0.026566382, 0.03658679, 0.055304702, 0.0047094855, 0.032723054, -0.064340554, -0.0070862686, 0.024756622, -0.005132698, -0.07492637, -0.006314359, 0.016119285, 0.017335467, -0.03511081, -0.00035467566, 0.021171667, -0.050375607, -0.01970712, 0.02735266, 0.0067942413, 0.038436104, 0.019214738, 0.021818124, 0.013960078, 0.010596284, -0.03100693, 0.009691366, 0.03872849, 0.08606042, -0.01147293, -0.016001936, 0.010848098, -0.03224546, 0.010742551, 0.02802883, 0.04022743, -0.055602495, -0.0071946075, -0.05075217, 0.023719251, -0.024531757, -0.017437002, 0.023142189, -0.006718983, -0.0076643443, -0.0416779, -0.010166103, 0.009044271, -0.023472574, -0.013699845, -0.0051287753, 0.018768007, -0.024426429, -0.023453726, 0.016352262, -0.016635615, -0.011294696, -0.04223279, 0.020730712, 0.05301817, 0.027249847, -0.008971697, 0.018686915, 0.008114227, -0.049121413, -0.018054362, -0.020386036, -0.0025143633, 0.04227658, -0.019459313, -0.038557906, 0.001271868, 0.003610242, 0.027309893, -0.0532714, -0.040579528, 0.012937037, -0.009934056, 0.0070090536, 0.055987615, 0.0043369634, -0.0006667707, 0.014161866, -0.042936634, 0.07458929, 5.9534945e-05, -0.041438214, 0.033039358, -0.035159994, 0.06923621, -0.058676146, 0.0018828464, 0.049618028, 0.0048149144, 0.0076617403, -0.064485915, 0.00058572576, -0.008986594, 0.009491179, -0.011054155, -0.0015539771, 0.038410407, 0.012060705, -0.042889707, -0.037908413, 0.012965484, -0.0032084715, 0.016045703, -0.004853606, -0.032798514, 0.008936899, -0.039569724, 0.045807038, -0.05385741, -0.010414057, -0.025104664, 0.012487276, -0.008516321, 0.017110335, -0.045831878, -0.061969317, 0.05874717, 0.011826053, -0.0016737687, -0.06813973, -0.027233683, 0.03392728, -0.023477534, -0.0031085815, 0.0074667516, 0.01594431, 0.010112526, 0.012291866, -0.018541276, 0.024768416, 0.002234904, 0.005685268, 0.0032018158, -0.026588649, 0.029670816, 0.0051262546, -0.02249324, -0.013250728, -0.029215105, 0.024819963, 0.023042787, -0.007890995, -0.019962223, -0.023990367, 0.034775153, -0.0053618713, -0.026565593, -0.011654308, -0.008695788, -0.0003997657, -0.016608754, 0.043667506, 0.06788722, 0.0042475583, -0.00992377, 0.020167496, -0.029689211, 0.020274635, -0.05372559, 0.024633745, -0.021251174, 0.008630704, 0.0095522, -0.054820526, 0.01647084, 0.03402092, 0.060029514, 0.017307442, -0.028696813, 0.049390122, -0.00094262714, -0.021840129, -0.041456304, 0.022993304, 0.008846102, 0.028794458, -0.034093138, -0.015514933, -0.009066764, 0.015585698, -0.033714354, -0.029922485, 0.050158486, -0.018935064, 0.013715128, -0.025693849, -0.037878048, 0.0036396622, 0.005155577, -0.022822702, 0.035837375, -0.016133536, 0.006962016, -0.0014942992, -0.0018320787, 0.006943601, -0.0053040837, 0.01696945, 0.021780781, 0.037926525, 0.02370119, -0.017558973, 0.045093264, 0.04826814, -0.0060371864, 0.040420916, -0.021847207, -0.02280503, -0.045088466, 0.046798408, -0.04540099, 0.045509998, -0.023681026, -0.029435372, 0.07004911, 0.0016393088, 0.01104834, 0.0106452415, 0.019054167, 0.035313465, -0.011111527, -0.00080123777, 0.052284766, -0.03033249, 0.056246612, -0.022053417, -0.026775245, 0.0064415955, 0.0053720134, -0.023145886, 0.00048016896, 0.007922055, 0.010036752, 0.013465958, -0.017752483, -0.008294228, -0.015018512, -0.030145153, -0.016657067, 0.04637885, 0.017021831, -0.022263987, 0.027812017, -0.02833254, 0.00031257854, -0.042786237, 0.00047059482, 0.022669254, -0.029661564, -0.024390398, 0.023687486, 0.03234204, -0.015536552, -0.001885308, -0.020787835, -0.011520233, -0.007368288, -0.07395433, -0.024222065, 0.045040417, -0.0079567, 0.043016642, 0.05711617, -0.0018622646, 0.006737035, -0.0023004913, 0.009791723, -0.026187165, 0.018326765, -0.004098457, -0.05385735, -0.0022074645, -0.016601186, -0.014991592, -0.01086527, -0.03504194, 0.027371991, 0.016039627, -0.013406116, 0.020708758, 0.026820306, -0.03021471, -0.009568295, 0.008492974, 0.031730555, 0.058642335, 0.047136743, -0.009081803, 0.018309714, -0.041556347, 0.004107211, -0.025443655, -0.014885622, -0.04749346, 0.026511876, -0.03605109, -0.060826287, -0.004483471, 0.029231917, 0.06809397, 0.00450401, 0.03225228, 0.051576003, -0.022638578, -0.0062792604, 0.0148486355, -0.02394229, -0.023820916, 0.05991631, -0.0047399425, 0.027765568, -0.0119947335, 0.03208507, -0.027985219, 0.023734782, 0.019072147, -0.014831898, 0.05272746, 0.006708333, 0.033912238, -0.047725458, 0.01381067, -0.017424962, -0.06205539, 0.008303078, 0.040258806, 0.03677118, 0.01032915, -0.019519525, 0.002976246, -0.01983798, -0.01964828, -0.0773968, -0.0073223794, 0.0010682225, 0.06678711, 0.006927687, -0.044661175, 0.01835837, -0.04719593, 0.043682177, 0.02385605, -0.0036599396, -0.013649088, -0.02004945, -0.046603825, -0.029690627, 0.0037559846, -0.0020446149, 0.0034634394, 0.013184248, 0.010274401, 0.0066444837, -0.016804134, -0.038264196, -0.012021932, -0.006324357, -0.0044205673, 0.010162657, 0.02048359, -0.010095682, -0.04521893, -0.0023428677, 0.012270769, -0.02381155, 0.019257264, -0.015194318, -0.036594924, 0.0009440788, 0.011659941, 0.03602614, 0.0013611579, 0.042829193, 0.006688507, -0.023034178, 0.00994308, 0.0017318657, 0.0011904627, 0.021374976, 0.0043364367, -0.006789772, -0.003656801, 0.008438799, 0.036056805, -0.038845487, -0.03731817, 0.016986195, -0.027599389, -4.720855e-05, 0.015122044, 0.016477065, 0.034150913, -0.010333025, 0.016746286, 0.009534359, -0.031668246, 0.012011074, -0.039419334, -0.029929219, 0.019199302, -0.023351038, 0.019464295, 0.0851826, 0.01189013, 0.02871275, 0.03086593, -0.021656498, -0.0030568296, -0.0044337492, -0.07407708, 0.04038673, 0.07385538, 0.007223375, 0.015331218, 0.044163257, 0.033563484, -0.012759324, 0.021449968, -0.0029864106, 0.018081138, 0.053912856, 0.010185099, -0.018069578, 0.004709213, 0.05174701, -0.011217067, 0.019740162, 0.027281934, -0.012599029, 0.00048663223, 0.0050245486, 0.0075939028, 0.02316467, 0.0065087783, -0.0024689445, -0.016578091, -0.013729304, -0.0016918635, 0.0020072404, -0.00024817625, 0.0205405, 0.0029077907, 0.005345077, 0.028380102, -0.03687998, -0.018994605, 0.0015335915, 0.0068721743, -0.0028922523, 0.0112220235, -0.035819594, 0.039436094, -0.010892602], episodes=['d9acca4b-7f81-420c-8f4c-85f184acfd71'], expired_at=None, valid_at=datetime.datetime(2024, 10, 26, 0, 0, tzinfo=datetime.timezone.utc), invalid_at=None, attributes={}), EntityEdge(uuid='7f14d5d3-6c8f-4136-b6c7-8166a9677dc2', group_id='', source_node_uuid='09d46978-9866-415d-ab6f-c0c767489e9a', target_node_uuid='0d99e65c-50f1-4497-9501-6c2b6c6b41fa', created_at=datetime.datetime(2025, 10, 30, 2, 38, 7, 358740, tzinfo=datetime.timezone.utc), name='BUDGET_FOR', fact='客户张先生的预算是6000元', fact_embedding=[-0.05979748, -0.049576335, -0.008679611, -0.024938947, -0.0011127674, -0.057662386, -0.0051057814, -0.026200432, -0.06624329, 0.06222557, -0.005609876, 0.007577235, 0.07997198, -0.007875359, -0.046081048, 0.04128916, -0.03591935, 0.0037432935, -0.014996383, 0.08646476, -0.03484447, -0.018691977, -0.042774122, -0.059861243, -0.018537553, -0.011214678, 0.020227293, 0.06402852, 0.026608596, -0.031588063, 0.016499413, 0.0073389094, -0.042069357, -0.0071886894, 0.03101312, -0.012123865, -0.028562697, 0.02951689, -0.00058568234, 0.027462892, -0.0011599156, 0.005616585, -0.04938186, -0.023097679, 0.046892405, 0.007150898, 0.00031748464, -0.005825801, 0.048527356, 0.017915387, -0.037146725, -0.027840264, -0.0010666145, -0.0047540683, 0.038474448, -0.015324217, 0.0010848067, 0.009797347, 0.020226033, -0.027507871, -0.09060592, 0.014077207, -0.0008041863, -0.02431995, -0.0010965734, 0.021236993, 0.009822518, -0.042356037, -0.06687373, -0.028913999, 0.016390556, -0.044300396, -0.023751117, -0.0008052863, -0.035209052, -0.009053732, 0.008971434, -0.0047668237, 0.03286639, -0.051444393, -0.000892895, 0.015348624, -0.007372931, -0.0061365273, -0.002461731, -0.0028529256, 0.07729647, 0.020324524, 0.016074771, -0.021237466, 0.03077263, 0.031070927, -0.020225262, -0.053542066, 0.027195612, -0.0044267746, 0.005385606, -0.005400027, -0.045376036, 0.0031306522, -0.008456502, 0.01805298, -0.037750475, 0.01834153, -0.09585073, 0.023189263, -0.11277337, -0.025734022, -0.032476492, -0.033509124, -0.01370446, -0.010816361, -0.016929267, 0.023679031, 0.014764776, -0.0047521517, -0.01629047, -0.00827761, -0.017473597, -0.00050256803, 0.031888373, 0.023050955, -0.027455226, -0.027343605, -0.0011935657, 0.026067343, -0.052615575, -0.005728455, 0.0015660595, 0.00431794, 0.02169586, 0.0021831861, -0.019842915, 0.01247693, -0.0038804687, 0.018976033, 0.014454318, 0.027776487, 0.0061609624, 0.006413196, 0.00806918, -0.0138274515, -0.041998174, -0.030733423, -0.023639126, -0.0012529916, 0.008948251, 0.009504352, 0.008340293, 0.012705486, 0.015836468, 0.038363744, -0.043317396, -0.030223943, 0.0041790856, 0.021438813, 0.008119548, 0.0046460014, 0.019881835, 0.0025589557, -0.0056499317, 0.013219276, 0.040654406, -0.020674314, -0.042157482, 0.022046424, -0.054547172, -0.02345344, -0.013731552, -0.024304684, -0.0020502494, 0.026537169, 0.0055409074, 0.009084439, 0.03702881, -0.01086637, -0.028387664, -0.02626478, 0.0004148475, -0.0149832005, -0.021013312, -0.01735783, 0.0037145189, 0.040721096, 0.012033443, -0.04903015, 0.0029172888, -0.03219147, -0.020889925, -0.0005584103, -0.0028291394, -0.027892413, 0.022595964, 0.03718839, -0.0107165575, -0.022255635, -0.0006529213, -0.0034326743, -0.014699655, -0.02836099, -0.05654545, -0.0293142, 0.02530794, 0.045521874, -0.003076252, -0.031164674, 0.034492277, 0.03912358, -0.0054658013, -0.024083314, -0.06423787, 0.05190199, 0.027852114, 0.010930203, -0.014287202, 0.011826773, 0.006816067, -0.020524688, 0.036976937, 0.043309245, 0.017405016, 0.012426509, -0.0057772906, 0.0014574922, -0.005946783, -0.0635406, 0.040283363, -0.041319154, 0.014557984, -0.011329226, 0.034497093, 0.045737524, 0.029931063, 0.020999556, 0.063551776, -0.0002289513, 0.027052602, -0.007873243, 0.014417691, -0.030771444, -0.037125997, -0.017635891, 0.014812812, 0.0068520405, -0.034539644, 0.031781882, -0.03678636, 0.020074775, -0.03061477, 0.011147332, 0.048810005, -0.05827964, -0.033615414, 0.0479529, 0.03472156, 0.0052353307, -0.00892561, -0.025971074, 0.020419104, 0.004884972, -0.02881646, 0.0028992193, -0.045196835, 0.028308395, -0.0024762994, -0.0019406351, -0.017889677, 0.055753578, -0.026626486, -0.012949599, -0.017284032, 0.009656833, 0.020555785, 0.025771068, 0.012807639, 0.0032685322, 0.0075985612, -0.053039473, -0.024367103, -0.045532882, -0.057740387, 0.004006171, 0.0022534265, 0.053025022, 0.057893485, 0.0296625, 0.005644495, -0.008333122, 0.035992734, 0.003949756, 0.03128264, 0.05050545, -0.056382887, 0.03290263, -0.021632846, -0.016171835, 0.0568009, 0.07464721, -0.0035041682, -0.049033765, -0.011781417, -0.017118221, -0.0029303913, 0.008362849, -0.024313938, -0.019164387, 0.047102977, 0.03963873, 0.012970806, -0.00618229, 0.095219955, 0.012267022, 0.0140098035, 0.015274142, -0.027373366, -0.012188319, 0.0054452675, 0.06515087, -0.012989301, -0.04911088, 0.009888887, 0.00084575894, -0.0071393875, -0.024529401, -0.04489417, -0.013482764, -0.0486257, 0.05073128, 0.012744053, -0.030899506, -0.018728642, -0.029995875, -0.013953228, 0.0110092005, -0.04359648, 0.009887584, 0.07381535, -0.0127121955, 0.030584302, 0.0135589475, -0.026806876, 0.00042487372, -0.03443623, 0.010882748, -0.060009982, 0.009474966, -0.036396448, 0.020456739, 0.016844371, -0.004761691, 0.019914227, -0.0025362072, 0.004581508, -0.027307356, 0.007737237, -0.005197294, -0.0658902, 0.036463913, -0.06674717, -0.0020639165, -0.023450127, -0.08592135, 0.030521572, -0.017356403, -0.026297035, 0.014663192, -0.052446224, -0.06318501, 0.039148625, 0.028181007, -0.052446976, 0.03853962, -0.013194982, 0.01843394, 0.04367533, 0.035177216, 0.05483276, -0.020689355, 0.030549053, 0.0033656848, 0.0011093444, 0.011611152, 0.026678482, 0.028573649, 0.035079896, -0.022446482, 0.020500489, 0.024316331, 0.03639162, -0.03321623, 0.007229095, -0.0053576585, 0.028117891, -0.0025781535, 0.0060093384, -0.0032851582, -0.07437454, -0.018237054, 0.025609523, -0.000652005, 0.0030291197, -0.06663581, -0.036780775, -0.015077348, -0.015430536, -0.019734018, 0.013756806, -0.013501277, 0.0110621955, -0.002730903, 0.045906223, -0.019814523, -0.037750065, -0.030582685, -0.004423291, -0.036213513, 0.046835214, -0.010899742, 0.037556652, 0.0084125325, 0.026539948, 0.030348081, -0.03614607, -0.02855825, 0.0037236798, -0.029601669, -0.008601165, -0.023518682, -0.06390917, 0.07701135, 0.030664649, 0.00922919, 0.0028970605, -0.02913655, -0.03270945, 0.010020885, 0.053662565, -0.053703446, 0.05106764, -0.018347772, -0.012400062, 0.040688537, 0.03320678, -0.05681152, 0.05165632, 0.0066407197, -0.037821323, 0.0021684438, -0.016171785, -0.044368036, 0.010751698, -0.015422481, -0.0080073, -0.01065977, -0.015762787, -0.039166354, 0.0034372148, 0.014920978, 0.057194084, 0.0044932147, -0.04522217, 0.052101858, 0.008362628, 0.005993791, -0.026298195, -0.011001368, -0.053218495, -0.014129346, 0.012955666, 0.017645327, -0.044269837, -0.019875225, 0.010836953, -0.00080850837, -0.0016078954, 0.023351675, -0.013573701, -0.015287271, -0.010787003, 0.02135847, -0.029427893, -0.029115794, -0.04527756, -0.040508877, 0.058154527, -0.024976393, -0.0008340957, -0.014612602, -0.005548325, -0.014934714, 0.02227365, -0.019700274, 0.047383152, 0.003098762, -0.02498744, -0.016304996, 2.35363e-06, 0.0028428463, -0.063321054, -0.04650168, -0.07326456, -0.05383514, 0.020691046, 0.004677119, -0.02575196, 0.032067828, -0.06666509, -0.014820263, 0.012419708, -0.051364474, -0.009010054, 0.005029451, -0.029412692, 0.0489018, -0.045966808, -0.04496504, -0.013309543, 0.060878303, 0.0049736043, 0.018984344, -0.005936464, 0.08274024, -0.006151219, -0.05416962, -0.0019171574, 0.09257934, -0.031249132, -0.035893794, 0.041370396, 0.025685053, 0.030608978, 0.0383859, 0.04206794, 0.033783242, 0.007912728, 0.02779159, -0.010768425, 0.01406613, 0.014851629, -0.004032158, 0.007918256, -0.0059642633, -0.046912212, -0.064076975, 0.010305366, 0.035059173, -0.040526927, 0.023094162, 0.041256215, -0.011362597, 0.0058291513, -0.034411684, 0.033443283, -0.018795468, 0.014306836, -0.011213153, 0.07638704, -0.00020880364, -0.0014421908, 0.0229137, 0.02907959, -0.0023419815, 0.026665475, 0.0073448457, -0.0027550436, -0.010666545, 0.060463034, 0.0043977993, -0.0010708643, 0.024157561, -0.028479753, -0.04860268, 0.0070144967, -0.017270423, 0.03583862, -0.0738139, -0.04989445, -0.022290556, 0.018277882, -0.05815416, 0.021725265, -0.004197215, 0.04655112, -0.01948874, -0.047132775, 0.009500769, 0.057417, 0.023962855, 0.02360493, 0.017286232, -0.025530107, -0.10153282, 0.051347736, 0.022893345, 0.10239867, -0.02875384, -0.044910934, 0.04272971, 0.0025585198, -0.015922677, 0.011428517, 0.030561674, 0.024994448, 0.0126024, -0.04337343, 0.011695467, -0.026881617, -0.023588615, 0.027069643, 0.044892732, -0.032524347, 0.002520503, -0.065689355, 0.011407434, -0.042520206, -0.030529087, -0.01779031, 0.043096993, -0.011511762, -0.03277672, -0.021205816, -0.028553456, -0.016403047, 0.023871293, -0.011994386, 0.04532946, 0.0008130858, 0.008888023, -0.04328939, 0.012418147, -0.032756265, -0.009306982, -0.03247006, 0.017648008, 0.013831387, 0.0023687582, -0.07360256, -0.0070076617, -0.014526324, -0.0025239722, 0.0075380383, -0.013858628, -0.029178107, 0.023213062, 0.0057512755, 0.04949562, 0.009539139, 0.0014364346, 0.01845273, -0.039134588, 0.03032046, 0.0090859225, -0.02497511, -0.012159817, -0.015463143, 0.015775228, -0.02703155, -0.02917864, 0.013868823, -0.02810376, -0.0075850547, -0.0213956, 0.010906883, -0.024045298, 0.02035255, -0.036761593, -0.013765574, 0.013271101, 0.04058193, -0.028796943, -0.02597045, -0.06433095, -0.02048975, 0.00411937, -0.010965345, 0.008594884, -0.0048414185, -0.08920745, -0.02288753, -0.069953136, 0.0062817303, -0.022090055, -0.02179019, 0.013200422, 0.03369534, 0.022611462, -0.054860715, 0.02785162, 0.027975637, -0.00068629056, -0.058199316, -0.00552922, 0.039143674, -0.024687894, -0.010679944, 0.024341114, -0.014032497, -0.01139563, 0.021599649, -0.0246644, -0.019720089, -0.01954461, -0.018688621, 0.022218846, -0.016802195, 0.0065311417, 0.014370647, -0.040367033, -0.021815505, -0.034590755, 0.02790088, 0.0063652587, 0.0076254015, -0.016109377, 0.01285601, 0.06792965, -0.0017138135, -0.023692332, 0.02062168, -0.033123083, 0.001157197, 0.0059105116, 0.032819938, 0.034055956, 0.009343799, -0.030941645, 0.048556086, -0.06856079, 0.005206803, -0.041265387, -0.008066909, 0.0146296285, 0.015208377, 0.0040283953, -0.0122976145, 0.024694193, 0.046055343, 0.02563244, 0.02214956, -0.013564016, 0.0007911944, -0.02269262, 0.020304766, 0.0060461485, -0.012566677, -0.005623001, -0.012213532, -0.04445734, -0.0021382328, 0.0051198523, 0.026015004, -0.07144475, 0.04353489, 0.041205257, -0.021488024, -0.03913632, -0.04603348, -0.0073722624, 0.019488405, 0.022742424, -0.015229755, -0.046167582, 0.014794714, 0.039899454, 0.029535893, -0.016423224, 0.015671222, -0.0076231635, 0.024694558, 0.0337372, -0.0008282193, -0.0069657974, -0.023696788, 0.014786371, -0.007934558, 0.00055909355, 0.063276604, 0.0074694417, -0.031045796, -0.03180142, 0.009118451, -0.040447317, 0.039102778, -0.02407357, -0.028408399, 0.06883881, 0.016742121, 0.00065721583, 0.01802813, 0.07210349, 0.015663462, -0.016247699, -0.030450705, 0.03182991, -0.03121386, 0.050870433, -0.015417748, 0.03188182, -0.004327965, -0.00098612, 0.034638852, 0.0043609967, 0.01449388, 0.052083243, -0.012875537, 0.006282674, 0.017072814, 0.011056921, -0.0064118234, 0.035616532, 0.03363489, 0.052111827, 0.034183614, 0.06559367, -0.022228956, 0.02127511, -0.020544529, 0.0030091791, -0.006216284, -0.01247726, -0.012877092, -0.022394205, 0.053087324, 0.006377621, 0.005665443, 0.003956371, -0.03817246, -0.015514416, -0.050901026, 0.0007032665, 0.03988158, -0.017234541, 0.0056757373, 0.053791184, 0.05544214, 0.005685222, -0.015705789, -0.0074013704, 0.011545652, 0.023277855, 0.023215208, -0.023677774, 0.0034919118, -0.057507377, -0.012803952, -0.01747771, -0.03151185, 0.020799154, 0.02783267, 0.035142954, 0.0015978372, 0.0425599, -0.03202379, -0.014184494, -0.039702624, 0.020392071, 0.1099896, 0.052784935, -0.029372534, -0.008153795, 0.014183682, -0.043388397, -0.08567512, -0.04004876, -0.014992829, -0.005456164, 0.0074519427, -0.058667254, -0.05937974, 0.027193159, 0.013220646, -0.011747942, 0.003650756, 0.020046823, -0.04241299, -0.022616083, 0.04476112, -0.010326535, 0.01807715, 0.039204, -0.041267555, 0.0127302455, 0.005089317, 0.0029223354, 0.00284606, 0.005076169, -0.0101656495, 0.013072382, 0.022113852, 0.007009396, 0.020425873, -0.0035160233, 0.035664733, -0.016644977, -0.07642673, -0.036200136, 0.012769443, 0.016712163, 0.00881391, -0.03532553, -0.02087685, 0.013196874, 0.0021940088, -0.019975407, 0.01118471, -0.0067596002, 0.02927822, -0.008472464, -0.030814992, 0.012123194, -0.016230078, 0.007835952, 0.013125979, -0.024898004, 0.0031326818, -0.02088939, 0.0020383315, -0.034902092, -0.021434754, -0.037997562, 0.017040001, 0.0046515106, 0.052592896, 0.027001463, 0.019418593, -0.07114213, 0.0089424485, 0.01994888, -0.0008458084, 0.04026577, 0.008168409, -0.007916535, 0.001108039, 0.028086081, 0.022182975, -0.009679033, -0.012085914, -0.0116393985, -0.0083583, 0.031169465, -0.0014684411, 0.017386014, 0.02284225, 0.015465328, 0.016438486, -0.019711902, 0.0071347333, -0.051503282, 0.026544992, -0.008419646, 0.018213533, -0.016425088, 0.016561238, -0.007608757, 0.046768486, 0.011152614, -0.048748817, 0.008432772, -0.024987759, 0.0020392372, 0.021801101, 0.0067783366, 0.033629548, 0.016482098, 0.013063728, -0.014679164, -0.012877742, 0.0061927545, 0.008332421, -0.04786338, 0.019422447, 0.01648559, 0.04643223, 0.0303455, -0.007164487, 0.005321738, 0.07290453, -0.012526866, -0.059799768, -0.07253164, -0.011722895, 0.021861833, 0.061191555, 0.03955856, 0.020783525, -0.04451726, -0.03165868, -0.04296164, 0.04169082, -0.025695134, 0.04595342, 0.035417937, -0.025577914, -0.015470689, 0.005765158, 0.015935933, -0.029994305, 0.020767719, 0.027436128, -0.040502504, 0.029460989, 0.005162738, -0.015483195, 0.006076863, 0.021960026, 0.038087722, -0.022156334, -0.0034348108, 0.015505318, -0.07181038, -0.011441172, -0.0035321803, -0.030463738, -0.0044539487, 0.024705322, -0.0077146864, 0.00037497457, -0.0072822697, 0.016420914, 0.024711788, 0.020193852, 0.027114583, 0.026605966, 0.010594545], episodes=['d9acca4b-7f81-420c-8f4c-85f184acfd71'], expired_at=None, valid_at=datetime.datetime(2024, 10, 26, 0, 0, tzinfo=datetime.timezone.utc), invalid_at=None, attributes={})] communities=[] community_edges=[]
            print(f"成功添加片段: {resp1}")
        except EntityTypeValidationError as e:
            print(f"数据验证失败: {e.message}")
            # fixed_data = e.model_construct(**e.model_dump(exclude_unset=True))

        # for episode in episodes_data:
        #     await graphiti.add_episode(
        #         name=episode['name'],
        #         episode_body=episode['content'],
        #         source=episode['source'],
        #         source_description=episode['description'],
        #         reference_time=episode['timestamp']
        #     )
        #     print("113")
        try:
            elated_edges = await graphiti.search(
                query="客户对手机续航能力的兴趣",
            )
            print("114")
            print(elated_edges)
            related_nodes = await graphiti.search(
                query="预算6000元的智能手机",
                #node_type="Product",  # 可指定实体类型
            )
            print("115")
            print(related_nodes)
        except NodeNotFoundError as e:
            print("未找到节点")
            raise e
        except EdgeNotFoundError as e:
            print("为找到关系")
            raise e
    except Exception as e:
        print(f"处理过程中出现错误: {e}")
    finally:
        # 3. 记得在最后关闭连接
        await graphiti.close()


if __name__ == "__main__":
    asyncio.run(test_graphiti())
