env {
  execution.parallelism = 2
  job.mode = "BATCH"
  checkpoint.interval = 10000
}

source {
  Jdbc {
    driver = "com.mysql.cj.jdbc.Driver"
    url = "jdbc:mysql://10.107.99.50:13306/economic_security_platform_staging_db?useUnicode=true&characterEncoding=UTF-8&rewriteBatchedStatements=true"
    user = "stagingdb"
    password = "jjxxzx@20250821"
    query = "SELECT * FROM elect_industry_power_usage LIMIT 100"
  }
}
nsform {
  # If you would like to get more information about how to configure seatunnel and see full list of transform plugins,
    # please go to https://seatunnel.apache.org/docs/transform-v2
}
sink {
  jdbc {
    url = "jdbc:mysql://10.107.99.50:13306/economic_security_platform_staging_db?useUnicode=true&characterEncoding=UTF-8&rewriteBatchedStatements=true"
    driver = "com.mysql.cj.jdbc.Driver"
    username = "stagingdb"
    password = "jjxxzx@20250821"
    # query = "insert into elect_industry_power_usage_20251023(name,age) values(?,?)"
    
    # Automatically generate sql statements based on database table names
    generate_sink_sql = true
    database = economic_security_platform_staging_db
    table = elect_industry_power_usage_20251023
    
    # Exactly-once
    max_retries = 0
    is_exactly_once = "true"
    xa_data_source_class_name = "com.mysql.cj.jdbc.MysqlXADataSource"
  }  
}
